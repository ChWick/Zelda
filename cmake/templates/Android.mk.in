LOCAL_PATH	:= $(call my-dir)


# amazon game circle jni
@MENCUS_AMAZON_GAME_CIRCLE_ANDROID_MK@

# actual game
include $(CLEAR_VARS)
LOCAL_MODULE	:= @ANDROID_MOD_NAME@

LOCAL_LDLIBS	:= -landroid -lc -lm -ldl -llog -lEGL -lGLESv2

# if there are other dependencies
@DEPENDENCIES_LDLIBS@

# bullet libs (beware of correct order!)
LOCAL_LDLIBS	+= @BULLET_SOFT_BODY_LIB@
LOCAL_LDLIBS   	+= @BULLET_DYNAMICS_LIB@
LOCAL_LDLIBS	+= @BULLET_COLLISION_LIB@
LOCAL_LDLIBS    += @BULLET_LINEAR_MATH_LIB@

# CEGUI libs
LOCAL_LDLIBS	+= @CEGUI_OGRE_RENDERER_LIB@
LOCAL_LDLIBS	+= @CEGUI_LIB@
LOCAL_LDLIBS	+= @CEGUI_CORE_WINDOW_RENDERER_SET_LIB@
LOCAL_LDLIBS	+= @CEGUI_FREE_IMAGE_IMAGE_CODEC_LIB@
LOCAL_LDLIBS	+= @CEGUI_TINY_XML_PARSER_LIB@
# CEGUI dependencies lib
LOCAL_LDLIBS	+= @CEGUI_DEPS_TINYXML_LIB@
LOCAL_LDLIBS	+= @CEGUI_DEPS_ICONV_LIB@
LOCAL_LDLIBS	+= @CEGUI_DEPS_PCRE_LIB@

# Ogre libs
LOCAL_LDLIBS	+= @OGRE_PLUGIN_PARTICLE_FX_LIB@
LOCAL_LDLIBS	+= @OGRE_PLUGIN_RENDER_SYSTEM_GLES2_LIB@
LOCAL_LDLIBS	+= @OGRE_RT_SHADER_SYSTEM_LIB@
LOCAL_LDLIBS	+= @OGRE_OVERLAY_LIB@
LOCAL_LDLIBS	+= @OGRE_LIB@
# Ogre deps lib
LOCAL_LDLIBS	+= @OGRE_DEPS_ZZIP_LIB@
LOCAL_LDLIBS	+= @OGRE_DEPS_Z_LIB@
LOCAL_LDLIBS	+= @OGRE_DEPS_FREEIMAGE_LIB@
LOCAL_LDLIBS	+= @OGRE_DEPS_FREETYPE_LIB@

# OIS lib
LOCAL_LDLIBS	+= @OIS_LIB@

# tinyxml2 lib
LOCAL_LDLIBS	+= @TINYXML2_LIB@

# lua lib
LOCAL_LDLIBS	+= @LUA_LIB@

# other deps
LOCAL_LDLIBS	+= @NDKOUT@/obj/local/@ANDROID_ABI@/libcpufeatures.a
LOCAL_LDLIBS	+= @CMAKE_BINARY_DIR@/systemlibs/@ANDROID_ABI@/libstdc++.a
LOCAL_LDLIBS	+= @CMAKE_BINARY_DIR@/systemlibs/@ANDROID_ABI@/libstdc++.a
LOCAL_STATIC_LIBRARIES := android_native_app_glue cpufeatures

#amazon game circle
LOCAL_SHARED_LIBRARIES := @MENCUS_AMAZON_GAME_CIRCLE_LIBRARY@


LOCAL_CFLAGS := -DGL_GLEXT_PROTOTYPES=1

# local includes path
LOCAL_CFLAGS	+= -I@NDKOUT@/jni -I@NDKOUT@/jni/includes

# bullet include path
LOCAL_CFLAGS	+= -I@BULLET_H_PATH@

# CEGUI include path
LOCAL_CFLAGS	+= -I@CEGUI_H_PATH@
# CEGUI deps path
LOCAL_CFLASS	+= -I@CEGUI_DEPS_TINYXML_PATH@
LOCAL_CFLAGS	+= -I@CEGUI_DEPS_ICONV_PATH@
LOCAL_CFLAGS	+= -I@CEGUI_DEPS_PCRE_PATH@

# Ogre include paths
LOCAL_CFLAGS	+= -I@OGRE_H_PATH@
LOCAL_CFLAGS	+= -I@OGRE_OVERLAY_PATH@
LOCAL_CFLAGS	+= -I@OGRE_PLUGIN_PARTICLE_FX_PATH@
LOCAL_CFLAGS	+= -I@OGRE_PLUGIN_RENDERSYSTEMS_GLES2_PATH@
LOCAL_CFLAGS	+= -I@OGRE_RT_SHADER_SYSTEM_PATH@
# Ogre deps include path
LOCAL_CFLAGS	+= -I@OGRE_DEPS_ZZIP_PATH@
LOCAL_CFLAGS	+= -I@OGRE_DEPS_Z_PATH@
LOCAL_CFLAGS	+= -I@OGRE_DEPS_FREEIMAGE_PATH@
LOCAL_CFLAGS	+= -I@OGRE_DEPS_FREETYPE_BUILD_PATH@
LOCAL_CFLAGS	+= -I@OGRE_DEPS_FREETYPE_FT_PATH@

# OIS path
LOCAL_CFLAGS	+= -I@OIS_H_PATH@
# tinyxml2 path
LOCAL_CFLAGS	+= -I@TINYXML2_H_PATH@

# lua path
LOCAL_CFLAGS	+= -I@LUA_H_PATH@

# local path
LOCAL_CFLAGS	+= -I@PROJECT_CONFIG_OUT@/
LOCAL_CFLAGS 	+= -I@CMAKE_SOURCE_DIR@/
LOCAL_CFLAGS 	+= -I@CMAKE_SOURCE_DIR@/dependencies/

# additional flags
LOCAL_CFLAGS 	+= -fexceptions -frtti -x c++ -D___ANDROID___ -DANDROID -DZZIP_OMIT_CONFIG_H -DINCLUDE_RTSHADER_SYSTEM=1

# we use the c++11 standard! 
LOCAL_CFLAGS 	+= -std=c++11 

# files
LOCAL_PATH := @SOURCE_DIR@
LOCAL_SRC_FILES := @SOURCE_FILES@

include $(BUILD_SHARED_LIBRARY) 

$(call import-module,android/cpufeatures) 
$(call import-module,android/native_app_glue) 
